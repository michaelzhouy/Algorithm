# 0092-反转链表II

## 说明
给你单链表的头指针 `head` 和两个整数 `left` 和 `right` ，其中 $left <= right$ 。请你反转从位置 `left` 到位置 `right` 的链表节点，返回 反转后的链表

## 示例

<div align="left">
<img src=https://github.com/michaelzhouy/Algorithm/blob/master/01-LeetCode/Figs/0092-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8II.JPG?raw=true / width=60%>
</div>

```
输入：head = [1,2,3,4,5], left = 2, right = 4
输出：[1,4,3,2,5]

输入：head = [5], left = 1, right = 1
输出：[5]
```

## 解

<div align="left">
<img src=https://github.com/michaelzhouy/Algorithm/blob/master/01-LeetCode/Figs/0092-%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8II-%E9%A2%98%E8%A7%A3.JPG?raw=true / width=60%>

### 思路
见上图及代码注释

### 复杂度
1. 时间复杂度$O(1)$
2. 空间复杂度$O(1)$

```python
class Solution:
    def reverseBetween(self, head: ListNode, left: int, right: int) -> ListNode:
        def reverseList(head):
            pre = None
            cur = head
            while cur:
                following = cur.next
                cur.next = pre
                pre = cur
                cur = following
        
        dum = ListNode(0) # 返回dum.next
        dum.next = head
        pre = dum
        # 走left-1步, 到left节点的前一个节点
        for _ in range(left - 1):
            pre = pre.next
        left_node = pre.next # left节点
        right_node = pre
        # 再走right-left+1步, 到right节点
        for _ in range(right - left + 1):
            right_node = right_node.next # right节点
        suc = right_node.next # right节点的下一个节点
        # 切断连接
        pre.next = None
        right_node.next = None      
        # 反转中间的链表
        reverseList(left_node)
        # 新建连接
        pre.next = right_node
        left_node.next = suc
        return dum.next
```